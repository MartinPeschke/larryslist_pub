<%inherit file="../layout.html"/>


<%def name="contentStatusImpl()">
    <div class="content-status">
        <h4>Status</h4>
    </div>
</%def>

<%def name="contentMenuImpl()">
    <div class="menu-heading">Collector</div>
    <ul class="nav nav-list">
        ${self.menuLink("Personal Details", "icon-user", view.getCollectorLink, startswith="admin_collector_")}
        ${self.menuLink("Collection", "icon-picture", view.getCollectionLink, startswith="admin_collection_")}
        ${self.menuLink("Art Engagement", "icon-calendar")}
        ${self.menuLink("Media Recognition", "icon-signal")}
        ${self.menuLink("Other Facts", "icon-arrow-right")}
        <div class="divider"></div>
        ${self.menuLink("Uploads", "icon-paper-clip")}
        ${self.menuLink("News", "icon-align-left")}
        ${self.menuLink("Interaction", "icon-refresh")}
    </ul>
</%def>
<%block name="contentbodyprefix">
    ${self.switchCollectorLink(view.collector)}
</%block>

<%block name="contentbodyappendix">
    <% form, values, errors = view.getSourcesForm() %>
    %if form:
        <div class="padded-body dimmed">
            <div class="sources-form">
                <legend>${form.label}</legend>

                <form class="${form.classes}" id="${form.id}" method="post" action="${request.fwd_url("admin_sources_save", collectorId = view.collector.id)}">
                    <input type="hidden" name="type" value="${form.id}"/>
                    <input type="hidden" name="token" value="${request.session.get_csrf_token()}"/>
                    %for field in form.fields:
                        ${field.render(form.id, request, values, errors, view)|n}
                    %endfor
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>

            </div>
        </div>
    %endif
</%block>



<%def name="switchCollectorLink(collector)">
    %if collector:
        <legend class="page-title-collector">
            %if collector.Collection:
            <div class="pull-right linked-collector-link">
                <% lc = collector.LinkedCollector %>
                %if lc:
                    Linked collector: <a href="${request.fwd_url("admin_collector_edit", collectorId = lc.id, stage = 'basic')}">${lc.getName()}</a>
                %else:
                    <a href="${request.fwd_url("admin_collector_add_collector", collectorId = collector.id)}">Add a linked collector</a>
                %endif
            </div>
            %endif
            ${collector.getName()}
        </legend>
    %else:
        <legend class="page-title-collector">Add collector</legend>
    %endif
</%def>