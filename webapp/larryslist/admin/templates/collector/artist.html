
<div class="artist-embedded-form">
    <div class="tagsearch-container " data-api-url="${widget.api_url}" data-api="${widget.api_allow_new}" data-api-result="${widget.api_result}" data-prefix="${widget.getName(prefix)}" ${widget.getQueryExtra()|n} data-on-create="views/artist/add">
        <script type="template/text" class="tag-template">
        ${self.tagTempl(widget, '{{ pos }}', '{{ model.getSearchLabel() }}', '{{ model.id }}')}
        </script>
        <div class="current-tags">
            %for i, tag in enumerate(value):
                ${self.tagTempl(widget, str(i), tag['name'], tag['name'], True)}
            %endfor
        </div>
        <div class="search-field">
            <input type="text" class="query ${widget.getClasses()}" autocomplete="off" ${widget.attrs.getInputAttrs(request)|n}/>
        </div>
    </div>
</div>

<%def name="tagTempl(widget, pos, label, id, saved = False)">
    <div class="artists tag">
        %if not saved:
                <div class="saved-warning">Not saved</div>
        %endif
    ${label|n}
    <span class="close">Ã—</span><input type="hidden" name="${widget.getName(prefix)}-${pos|n}.name" value="${id|n}"/></div>
</%def>
